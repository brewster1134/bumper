// Generated by CoffeeScript 1.9.0

/*
 * * bumper | responsive | breakpoint
 * * https://github.com/brewster1134/bumper
 * *
 * * @author Ryan Brewster
 * * Copyright (c) 2014
 * * Licensed under the MIT license.
 */

(function() {
  (function(root, factory) {
    if (typeof define === 'function' && define.amd) {
      return define(['bumper-core'], function() {
        return factory();
      });
    } else if (typeof exports !== 'undefined') {
      return module.exports = factory();
    } else {
      return factory();
    }
  })(this, function() {
    var BumperResponsiveBreakpoint, _base, _base1;
    BumperResponsiveBreakpoint = (function() {
      function BumperResponsiveBreakpoint() {}

      BumperResponsiveBreakpoint.prototype.events = function() {
        window.addEventListener('resize', (function(_this) {
          return function() {
            return _this.checkBreakpointChange();
          };
        })(this));
        return this;
      };

      BumperResponsiveBreakpoint.prototype.setBreakpoints = function(breakpoints) {
        var data, name;
        if (typeof breakpoints !== 'object') {
          throw new Error('breakpoints must be an object');
        }
        for (name in breakpoints) {
          data = breakpoints[name];
          if (data.min === void 0) {
            throw new Error("breakpoint " + name + " must have a min value");
          }
          if (data.max === void 0) {
            throw new Error("breakpoint " + name + " must have a max value");
          }
        }
        return this.list = breakpoints;
      };

      BumperResponsiveBreakpoint.prototype.getCurrent = function() {
        var data, name, width, _ref;
        width = window.innerWidth;
        _ref = this.list;
        for (name in _ref) {
          data = _ref[name];
          if (width >= data.min && width <= data.max) {
            return this.current = name;
          }
        }
        return this.current;
      };

      BumperResponsiveBreakpoint.prototype.setCurrentFunction = function(func) {
        if (typeof func !== 'function') {
          throw new Error('Must be a function!');
        }
        return this.getCurrent = func;
      };

      BumperResponsiveBreakpoint.prototype.checkBreakpointChange = function() {
        var bp, changeDecreaseEvent, changeEvent, changeIncreaseEvent, previousBp;
        previousBp = this.current;
        if (this.getCurrent() === previousBp) {
          return false;
        }
        bp = {};
        bp[this.current] = this.list[this.current];
        changeEvent = new CustomEvent('bumper-responsive-breakpoint-change', {
          detail: bp
        });
        window.dispatchEvent(changeEvent);
        if (this.list[previousBp].min < this.list[this.current].min) {
          changeIncreaseEvent = new CustomEvent('bumper-responsive-breakpoint-change-increase', {
            detail: bp
          });
          window.dispatchEvent(changeIncreaseEvent);
        } else {
          changeDecreaseEvent = new CustomEvent('bumper-responsive-breakpoint-change-decrease', {
            detail: bp
          });
          window.dispatchEvent(changeDecreaseEvent);
        }
        return bp;
      };

      return BumperResponsiveBreakpoint;

    })();
    window.Bumper || (window.Bumper = {});
    (_base = window.Bumper).Responsive || (_base.Responsive = {});
    return (_base1 = window.Bumper.Responsive).Breakpoint || (_base1.Breakpoint = new BumperResponsiveBreakpoint);
  });

}).call(this);
